{"name":"Php web spider","tagline":"php网络蜘蛛，信息收集工具A web spider, using php, based on cURL & simple html dom.","body":"php_web_spider\r\n==============\r\n\r\nphp网络蜘蛛，信息收集工具\r\n\r\n一个php实现的、基于cURL和simple html dom的轻量级网络爬虫\r\n\r\nA web spider, using php, based on cURL & simple html dom.\r\n\r\n\r\n### 配置\r\n\r\n```php\r\n// 简单配置 cookie文件目录和第三方网页分析库simple_html_dom的位置\r\ndefine(\"COOKIE_FILE\",\t\t\"./cookie.txt\");\r\ndefine(\"PARSER_FILE\",\t\t'./simple_html_dom.php');\r\n// 添加php_web_spider，创建一个实例\r\nrequire_once('./php_web_spider.php');\r\n$sp = new spider;\r\n```\r\n### 应用场合一 抓取检索结果\r\n```php\r\n// eg1 可以直接get百度检索结果\r\n$url = 'http://www.baidu.com/s?ie=UTF-8&wd=%E4%BD%A0%E5%A5%BD';\r\necho $sp-> fetch($url);\r\n// eg2 可以直接get豆瓣图书检索结果\r\n$url = 'http://book.douban.com/subject_search?search_text=php&cat=1001';\r\necho $sp-> fetch($url);\r\n```\r\n### 应用场合二 登陆，抓取信息\r\n```php\r\n// eg 登陆我校图书馆获取图书信息\r\n$username = '你的用户名';\r\n$password = '你的密码';\r\n$url = 'http://www.lib.dlut.edu.cn/';\r\n$sp-> login($url,$username,$password) or die(\"Fail in login.\");\r\n$sp-> fetch('http://opac.lib.dlut.edu.cn/reader/book_lst.php');\r\n// 提取当前借阅信息到关联数组\r\n$books = $sp-> fetch_table('[class=table_line]');\r\nheader(\"Content-type: text/html; charset=utf-8\");\r\nprint_r ($books);\r\n// 将信息转为字符串输出\r\n$info = \"\";\r\nforeach($books as $key => $book){\r\n\t// 如果图书超期加上超期前缀\r\n\t$deadline = date_create($book['应还日期']); \r\n\t$now= date_create();\r\n\tif($deadline>$now){\r\n\t\t$info .= \"(超期)\";\r\n\t}\r\n\t$book_name = $book['题名/责任者'];\r\n\t// 追加信息\r\n\t$info .= $book_name.\"\\n\";\r\n}\r\necho  \"图书信息：\\n\".$info;\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}